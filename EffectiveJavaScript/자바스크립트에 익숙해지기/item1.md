### 어떤 자바스크립트를 사용하고 있는지 알아야 한다.

ES5부터 다른 버전에 대한 대안으로 스트릭트(strict) 모드가 새로 추가되었다. 이 기능은 특정 자바스크립트 버전에서 \*\*오류를 일으키기 쉽거나 문제를 일으킬 만한 기능들을 사용할 수 없게 만들 수 있다. 또한 문법의 하위 호환성이 유지되어, 스트릭트 모드 확인을 구현하지 않은 환경에서도 엄격한 코드를 실행할 수 있게 했다.

스트릭트 모드는 프로그램의 맨 처음 부분에 다음과 같은 특별한 고정 문자열을 추가하면 활성화된다.

```js
"use strict";
```

함수 본문 처음에 추가하여 함수 내에서도 사용할 수 있다.

```js
function f(x) {
  "use strict";
  // ...
}
```

`스트릭트 모드로 작성한 코드는 항상 ES5를 완전히 지원하는 환경에서 테스트해야 한다.`

스트릭트 모드를 사용할 경우 주의할 점은 `"use stric"` 명령어가 스크립트나 함수의 상단에 선언되었을 때만 인식되고, 이 때문에 스크립트 병합에 민감해진다.

아래의 코드처럼 `file1.js`는 스트릭모드로 작성되었고

```js
// file1.js
"use strict";
function f() {
  // ...
}
```

`file2.js`는 스트릭모드로 작성되지 않은 코드가 있다.

```js
// file2.js
function g() {
  // ...
}
```

두 파일을 올바르게 합치려면 `file1.js` 파일을 앞에 두고 병합한다면 합쳐진 전체 파일은 스트릭트 모드로 동작할 것이다.

```js
// file1.js
"use strict";
function f() {
  // ...
}
// file2.js
function g() {
  // ...
}
```

반대로 `file2.js` 파일부터 합쳤다면 병합된 파일은 모드 스트릭트 모드로 동작하지 않는다.

```js
// file2.js
function g() {
  // ...
}

// file1.js
("use strict");
function f() {
  // ...
}
```

더 다양한 코드들과도 잘 병합될 수 있는 견고한 코드르 작성하고 싶다면 몇가짇 ㅐ안을 사용해야 한다.

- 스티릭트모드와 일반 모드의 파일을 절대 병합하지 마라.
  - 스트릭트 모드로 작성된 파일과 일반적인 파일, 즉 두개의 분리된 파일로 배포하는 것이다.
- 즉시 실행되는 함수 표현식을 사용해 파일들의 본문을 감싸라.
  - 각 파일의 내용을 함수로 감싸서 독립적으로 해석되게 하라.
  ```js
  (function () {
    // file1.js
    "use strict";
    function f() {
      // ...
    }
  })();
  ```
  - 각 파일의 내용을 함수로 감싸서 독립적으로 해석되게 하라.
  ```js
  (function () {
    // file2.js
    // 스트릭트 모드 없음.
    function f() {
      // ...
    }
  })();
  ```
  - 각 파일의 내용이 별도의 스코프에 위치하기 때문에 모듈 시스템과 비슷하게 여러 파일과의 의존성을 관리하며 각 파일마다 스트릭트 모드의 사용 여부를 개별적으로 결정할 수 있다.
- 어떤 모드에 있건 동일하게 동작하도록 코드를 작성하라.
  - 스트릭트 모드로 작성하되 지역적으로 활성활될 수 있게 명시적으로 전체 코드 내용을 함수로 감싸라.
  ```js
  (function () {
    "use strict";
    function f() {
      // ...
    }
  })();
  ```

### 기억할 점

- 애플리케이션이 지원할 자바스크립트의 버전을 정하라.
- 애플리케이션이 동작하게 될 모든 환경에서 여러분이 사용한 모든 자바스크립트의 기능이 지원되어야 한다.
- 항상 스트릭트 모드 확인을 수행하는 최신 브라우저 환경에서 스트릭트 코드를 테스트하라.
- 스트릭트 모드를 지원에 대한 기대가 서로 다른 스크립트들을 병합할 때는 주의해야 한다.
